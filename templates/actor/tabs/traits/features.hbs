<div class="hwfwm-traits-features">

  <!-- Racial Abilities (subset view; items also remain in Granted Features below) -->
  <div class="hwfwm-card">
    <div class="hwfwm-card__title">Racial Abilities</div>

    <div class="hwfwm-itemlist">

      <div class="hwfwm-itemlist__head">
        <div>Name</div>
        <div></div>
      </div>

      {{#each raceFeatures as |it|}}
      <div class="hwfwm-itemlist__row">
        <div class="hwfwm-itemlist__name">{{it.name}}</div>
        <div class="hwfwm-itemlist__actions">
          <button type="button" class="hwfwm-itembtn" data-action="open-item" data-item-id="{{it.id}}">Open</button>
        </div>
      </div>
      {{/each}}

      {{#unless raceFeatures.length}}
        <div class="hwfwm-muted">No racial abilities yet.</div>
      {{/unless}}

    </div>
  </div>

  <!-- Role Abilities (subset view; items also remain in Granted Features below) -->
  <div class="hwfwm-card">
    <div class="hwfwm-card__title">Role Abilities</div>

    <div class="hwfwm-itemlist">

      <div class="hwfwm-itemlist__head">
        <div>Name</div>
        <div></div>
      </div>

      {{#each roleFeatures as |it|}}
      <div class="hwfwm-itemlist__row">
        <div class="hwfwm-itemlist__name">{{it.name}}</div>
        <div class="hwfwm-itemlist__actions">
          <button type="button" class="hwfwm-itembtn" data-action="open-item" data-item-id="{{it.id}}">Open</button>
        </div>
      </div>
      {{/each}}

      {{#unless roleFeatures.length}}
        <div class="hwfwm-muted">No role abilities yet.</div>
      {{/unless}}

    </div>
  </div>

  <!-- Granted Features (UNCHANGED: still shows ALL granted features) -->
  <div class="hwfwm-card">
    <div class="hwfwm-card__title">Granted Features</div>

    <div class="hwfwm-itemlist">

      <div class="hwfwm-itemlist__head">
        <div>Name</div>
        <div>Source</div>
        <div></div>
      </div>

      {{#each grantedFeatures as |it|}}
      <div class="hwfwm-itemlist__row">
        <div class="hwfwm-itemlist__name">{{it.name}}</div>
        <div class="hwfwm-itemlist__meta">{{it.source}}</div>
        <div class="hwfwm-itemlist__actions">
          <button type="button" class="hwfwm-itembtn" data-action="open-item" data-item-id="{{it.id}}">Open</button>
        </div>
      </div>
      {{/each}}

      {{#unless grantedFeatures.length}}
        <div class="hwfwm-muted">No granted features yet.</div>
      {{/unless}}

    </div>
  </div>

  <!-- Talents -->
  <div class="hwfwm-card">
    <div class="hwfwm-card__title">Talents</div>

    <div class="hwfwm-itemlist">

      <div class="hwfwm-itemlist__head">
        <div>Name</div>
        <div>Type</div>
        <div></div>
      </div>

      {{#each talents as |it|}}
      <div class="hwfwm-itemlist__row">
        <div class="hwfwm-itemlist__name">{{it.name}}</div>
        <div class="hwfwm-itemlist__meta">{{it.talentType}}</div>
        <div class="hwfwm-itemlist__actions">
          <button type="button" class="hwfwm-itembtn" data-action="open-item" data-item-id="{{it.id}}">Open</button>
          <button type="button" class="hwfwm-itembtn hwfwm-itembtn--danger" data-action="delete-item" data-item-id="{{it.id}}">Delete</button>
        </div>
      </div>
      {{/each}}

      {{#unless talents.length}}
        <div class="hwfwm-muted">No talents yet.</div>
      {{/unless}}

      <div class="hwfwm-itemlist__footer">
        <button type="button" class="hwfwm-itembtn" data-action="create-talent">+ Add Talent</button>
      </div>

    </div>
  </div>

</div>
