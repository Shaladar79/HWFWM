<header class="hwfwm-sheet__header">

  <div class="hwfwm-header-layout">

    <!-- LEFT: Portrait + Type -->
    <div class="hwfwm-header-portrait">
      <img class="hwfwm-header-portrait__img" src="{{document.img}}" data-edit="img" alt="{{document.name}}" />
      <div class="hwfwm-header-portrait__type">
        {{document.type}}
      </div>
    </div>

    <!-- RIGHT: Name + Inline fields -->
    <div class="hwfwm-header-main">

      <input
        class="hwfwm-sheet__name"
        name="name"
        type="text"
        value="{{document.name}}"
        placeholder="Name"
      />

      <div class="hwfwm-header-inline">

        <!-- Rank (derived, read-only, compact) -->
        <div class="hwfwm-header-field hwfwm-header-field--rank">
          <label class="hwfwm-header-label hwfwm-header-label--small">Rank</label>
          <input
            class="hwfwm-header-select"
            type="text"
            value="{{derivedRankLabel}}"
            readonly
          />
        </div>

        <!-- Race (read-only display; editable in Overview) -->
        <div class="hwfwm-header-field">
          <label class="hwfwm-header-label hwfwm-header-label--small">Race</label>
          <input
            class="hwfwm-header-select"
            type="text"
            value="{{selectedRaceLabel}}"
            readonly
          />
        </div>

        <!-- Role (read-only display; editable in Overview) -->
        <div class="hwfwm-header-field">
          <label class="hwfwm-header-label hwfwm-header-label--small">Role</label>
          <input
            class="hwfwm-header-select"
            type="text"
            value="{{selectedRoleLabel}}"
            readonly
          />
        </div>

        <!-- Background (read-only display; editable in Overview) -->
        <div class="hwfwm-header-field">
          <label class="hwfwm-header-label hwfwm-header-label--small">Background</label>
          <input
            class="hwfwm-header-select"
            type="text"
            value="{{selectedBackgroundLabel}}"
            readonly
          />
        </div>

      </div>

      <!-- Bottom line: Attribute Saves (label clickable for roll; total read-only) -->
      <div class="hwfwm-header-saves">

        <div class="hwfwm-header-save">
          <button
            type="button"
            class="hwfwm-header-save__label"
            data-action="roll-attribute"
            data-attr="power"
          >
            Power Save:
          </button>
          <input
            class="hwfwm-header-save__value"
            type="text"
            value="{{system.attributes.power.total}}"
            readonly
            data-key="powerSave"
            data-path="system.attributes.power.total"
          />
        </div>

        <div class="hwfwm-header-save">
          <button
            type="button"
            class="hwfwm-header-save__label"
            data-action="roll-attribute"
            data-attr="speed"
          >
            Speed Save:
          </button>
          <input
            class="hwfwm-header-save__value"
            type="text"
            value="{{system.attributes.speed.total}}"
            readonly
            data-key="speedSave"
            data-path="system.attributes.speed.total"
          />
        </div>

        <div class="hwfwm-header-save">
          <button
            type="button"
            class="hwfwm-header-save__label"
            data-action="roll-attribute"
            data-attr="spirit"
          >
            Spirit Save:
          </button>
          <input
            class="hwfwm-header-save__value"
            type="text"
            value="{{system.attributes.spirit.total}}"
            readonly
            data-key="spiritSave"
            data-path="system.attributes.spirit.total"
          />
        </div>

        <div class="hwfwm-header-save">
          <button
            type="button"
            class="hwfwm-header-save__label"
            data-action="roll-attribute"
            data-attr="recovery"
          >
            Recovery Save:
          </button>
          <input
            class="hwfwm-header-save__value"
            type="text"
            value="{{system.attributes.recovery.total}}"
            readonly
            data-key="recoverySave"
            data-path="system.attributes.recovery.total"
          />
        </div>

      </div>

    </div>

  </div>
</header>
